<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AstralTube - Ultimate YouTube Manager</title>
    <link rel="stylesheet" href="popup.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app" class="astraltube-popup">
        <!-- Header -->
        <header class="popup-header">
            <div class="header-brand">
                <div class="brand-icon">
                    <svg viewBox="0 0 24 24" class="astral-logo">
                        <defs>
                            <linearGradient id="astralGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#667eea"/>
                                <stop offset="100%" style="stop-color:#764ba2"/>
                            </linearGradient>
                        </defs>
                        <path fill="url(#astralGradient)" d="M12 2L13.09 8.26L22 9L13.09 9.74L12 16L10.91 9.74L2 9L10.91 8.26L12 2Z"/>
                        <circle cx="12" cy="12" r="3" fill="white" opacity="0.9"/>
                    </svg>
                </div>
                <div class="brand-text">
                    <h1 class="brand-title">AstralTube</h1>
                    <p class="brand-subtitle">Ultimate YouTube Manager</p>
                </div>
            </div>
            <div class="header-actions">
                <button class="header-btn" id="syncBtn" title="Sync Status">
                    <svg viewBox="0 0 24 24">
                        <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
                    </svg>
                    <span class="sync-status" id="syncStatus">Synced</span>
                </button>
                <button class="header-btn" id="settingsBtn" title="Settings">
                    <svg viewBox="0 0 24 24">
                        <path d="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.98C19.47,12.66 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11.02L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.65 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.22,8.95 2.27,9.22 2.46,9.37L4.57,11.02C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.66 4.57,12.98L2.46,14.63C2.27,14.78 2.22,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.68 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.98Z"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="dashboard" id="dashboardTab">
                <svg viewBox="0 0 24 24">
                    <path d="M13,3V9H21V3M13,21H21V11H13M3,21H11V15H3M3,13H11V3H3V13Z"/>
                </svg>
                <span>Dashboard</span>
            </button>
            <button class="nav-tab" data-tab="playlists" id="playlistsTab">
                <svg viewBox="0 0 24 24">
                    <path d="M15,6H3V8H15V6M15,10H3V12H15V10M3,16H11V14H3V16M17,6V14.18C16.69,14.07 16.35,14 16,14A3,3 0 0,0 13,17A3,3 0 0,0 16,20A3,3 0 0,0 19,17V8H22V6H17Z"/>
                </svg>
                <span>Playlists</span>
            </button>
            <button class="nav-tab" data-tab="subscriptions" id="subscriptionsTab">
                <svg viewBox="0 0 24 24">
                    <path d="M20,8H4V6H20M20,18H4V12H20M20,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V6C22,4.89 21.1,4 20,4Z"/>
                </svg>
                <span>Subscriptions</span>
            </button>
            <button class="nav-tab" data-tab="tools" id="toolsTab">
                <svg viewBox="0 0 24 24">
                    <path d="M22.7 19L13.6 9.9C14.5 7.6 14 4.9 12.1 3C10.1 1 7.1 0.6 4.7 1.7L9 6L6 9L1.6 4.7C0.4 7.1 0.9 10.1 2.9 12.1C4.8 14 7.5 14.5 9.8 13.6L18.9 22.7C19.3 23.1 19.9 23.1 20.3 22.7L22.6 20.4C23.1 20 23.1 19.3 22.7 19Z"/>
                </svg>
                <span>Tools</span>
            </button>
        </nav>

        <!-- Tab Content -->
        <main class="tab-content">
            <!-- Dashboard Tab -->
            <div class="tab-pane active" id="dashboardPane">
                <div class="dashboard-grid">
                    <!-- Quick Stats -->
                    <div class="stats-card">
                        <div class="stats-header">
                            <h3>Quick Stats</h3>
                            <button class="refresh-btn" id="refreshStats">
                                <svg viewBox="0 0 24 24">
                                    <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                                </svg>
                            </button>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value" id="totalPlaylists">0</div>
                                <div class="stat-label">Playlists</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalSubscriptions">0</div>
                                <div class="stat-label">Subscriptions</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="totalCollections">0</div>
                                <div class="stat-label">Collections</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="watchTime">0h</div>
                                <div class="stat-label">Watch Time</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="quick-actions-card">
                        <h3>Quick Actions</h3>
                        <div class="action-buttons">
                            <button class="action-btn primary" id="createPlaylistBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
                                </svg>
                                <span>New Playlist</span>
                            </button>
                            <button class="action-btn secondary" id="createCollectionBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"/>
                                </svg>
                                <span>New Collection</span>
                            </button>
                            <button class="action-btn secondary" id="toggleSidebarBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M3,9H17V7H3V9M3,13H17V11H3V13M3,17H17V15H3V17M19,17H21V15H19V17M19,7V9H21V7H19M19,13H21V11H19V13Z"/>
                                </svg>
                                <span>Toggle Sidebar</span>
                            </button>
                            <button class="action-btn secondary" id="toggleDeckBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M3,3H11V11H3V3M13,3H21V11H13V3M3,13H11V21H3V13M13,13H21V21H13V13Z"/>
                                </svg>
                                <span>Deck Mode</span>
                            </button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="activity-card">
                        <h3>Recent Activity</h3>
                        <div class="activity-list" id="activityList">
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <svg viewBox="0 0 24 24">
                                        <path d="M15,6H3V8H15V6M15,10H3V12H15V10M3,16H11V14H3V16M17,6V14.18C16.69,14.07 16.35,14 16,14A3,3 0 0,0 13,17A3,3 0 0,0 16,20A3,3 0 0,0 19,17V8H22V6H17Z"/>
                                    </svg>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Created "Coding Tutorials" playlist</div>
                                    <div class="activity-time">2 hours ago</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Health Monitor -->
                    <div class="health-card">
                        <h3>System Health</h3>
                        <div class="health-indicators">
                            <div class="health-item">
                                <div class="health-label">Sync Status</div>
                                <div class="health-status healthy" id="syncHealth">
                                    <div class="health-dot"></div>
                                    <span>Healthy</span>
                                </div>
                            </div>
                            <div class="health-item">
                                <div class="health-label">API Quota</div>
                                <div class="health-status good" id="apiHealth">
                                    <div class="health-dot"></div>
                                    <span>85% Available</span>
                                </div>
                            </div>
                            <div class="health-item">
                                <div class="health-label">Storage</div>
                                <div class="health-status good" id="storageHealth">
                                    <div class="health-dot"></div>
                                    <span>12MB Used</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Playlists Tab -->
            <div class="tab-pane" id="playlistsPane">
                <div class="tab-header">
                    <div class="search-container">
                        <svg class="search-icon" viewBox="0 0 24 24">
                            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                        </svg>
                        <input type="text" placeholder="Search playlists..." id="playlistSearch">
                    </div>
                    <div class="tab-actions">
                        <button class="filter-btn" id="playlistFilter">
                            <svg viewBox="0 0 24 24">
                                <path d="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z"/>
                            </svg>
                            Filter
                        </button>
                        <button class="sort-btn" id="playlistSort">
                            <svg viewBox="0 0 24 24">
                                <path d="M18 21L14 17H17V7H14L18 3L22 7H19V17H22M2 19V17H12V19M2 13V11H9V13M2 7V5H6V7H2Z"/>
                            </svg>
                            Sort
                        </button>
                    </div>
                </div>
                <div class="playlist-list" id="playlistList">
                    <!-- Playlists will be populated here -->
                </div>
            </div>

            <!-- Subscriptions Tab -->
            <div class="tab-pane" id="subscriptionsPane">
                <div class="tab-header">
                    <div class="search-container">
                        <svg class="search-icon" viewBox="0 0 24 24">
                            <path d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                        </svg>
                        <input type="text" placeholder="Search subscriptions..." id="subscriptionSearch">
                    </div>
                    <div class="tab-actions">
                        <button class="filter-btn" id="subscriptionFilter">
                            <svg viewBox="0 0 24 24">
                                <path d="M14,12V19.88C14.04,20.18 13.94,20.5 13.71,20.71C13.32,21.1 12.69,21.1 12.3,20.71L10.29,18.7C10.06,18.47 9.96,18.16 10,17.87V12H9.97L4.21,4.62C3.87,4.19 3.95,3.56 4.38,3.22C4.57,3.08 4.78,3 5,3V3H19V3C19.22,3 19.43,3.08 19.62,3.22C20.05,3.56 20.13,4.19 19.79,4.62L14.03,12H14Z"/>
                            </svg>
                            Filter
                        </button>
                        <button class="health-btn" id="healthCheck">
                            <svg viewBox="0 0 24 24">
                                <path d="M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.4,12.4C8.8,11.3 10.4,10.5 12.5,10.5C16.28,10.5 19.5,13.22 20,17H22C21.5,12.17 17.39,8 12.5,8Z"/>
                            </svg>
                            Health Check
                        </button>
                    </div>
                </div>
                <div class="collections-list" id="collectionsList">
                    <!-- Collections will be populated here -->
                </div>
            </div>

            <!-- Tools Tab -->
            <div class="tab-pane" id="toolsPane">
                <div class="tools-grid">
                    <div class="tool-category">
                        <h3>Import & Export</h3>
                        <div class="tool-buttons">
                            <button class="tool-btn" id="importDataBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                                </svg>
                                <div class="tool-content">
                                    <div class="tool-title">Import Data</div>
                                    <div class="tool-desc">Import playlists and subscriptions</div>
                                </div>
                            </button>
                            <button class="tool-btn" id="exportDataBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M23,12L19,8V11H10V13H19V16M1,18V6C1,4.89 1.89,4 3,4H15A2,2 0 0,1 17,6V9H15V6H3V18H15V15H17V18A2,2 0 0,1 15,20H3C1.89,20 1,19.11 1,18Z"/>
                                </svg>
                                <div class="tool-content">
                                    <div class="tool-title">Export Data</div>
                                    <div class="tool-desc">Export to CSV, JSON, or OPML</div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="tool-category">
                        <h3>Analytics</h3>
                        <div class="tool-buttons">
                            <button class="tool-btn" id="analyticsBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M22,21H2V3H4V19H6V17H10V19H12V16H16V19H18V17H22V21M16,8H18V15H16V8M12,2H14V15H12V2M8,9H10V15H8V9M4,11H6V15H4V11Z"/>
                                </svg>
                                <div class="tool-content">
                                    <div class="tool-title">View Analytics</div>
                                    <div class="tool-desc">Detailed usage statistics</div>
                                </div>
                            </button>
                            <button class="tool-btn" id="durationCalcBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C6.47,22 2,17.5 2,12A10,10 0 0,1 12,2M12.5,7V12.25L17,14.92L16.25,16.15L11,13V7H12.5Z"/>
                                </svg>
                                <div class="tool-content">
                                    <div class="tool-title">Duration Calculator</div>
                                    <div class="tool-desc">Calculate playlist durations</div>
                                </div>
                            </button>
                        </div>
                    </div>

                    <div class="tool-category">
                        <h3>Utilities</h3>
                        <div class="tool-buttons">
                            <button class="tool-btn" id="cleanupBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"/>
                                </svg>
                                <div class="tool-content">
                                    <div class="tool-title">Cleanup Tool</div>
                                    <div class="tool-desc">Remove duplicates and dead links</div>
                                </div>
                            </button>
                            <button class="tool-btn" id="backupBtn">
                                <svg viewBox="0 0 24 24">
                                    <path d="M17,4A2,2 0 0,1 19,6V10.5L22,7.5V16.5L19,13.5V18A2,2 0 0,1 17,20H3A2,2 0 0,1 1,18V6A2,2 0 0,1 3,4H17M17,6H3V18H17V6Z"/>
                                </svg>
                                <div class="tool-content">
                                    <div class="tool-title">Backup & Restore</div>
                                    <div class="tool-desc">Create and restore backups</div>
                                </div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="popup-footer">
            <div class="footer-left">
                <span class="version">v3.0.0</span>
                <button class="footer-link" id="helpBtn">Help</button>
                <button class="footer-link" id="shortcutsBtn">Shortcuts</button>
            </div>
            <div class="footer-right">
                <button class="footer-btn" id="feedbackBtn" title="Send Feedback">
                    <svg viewBox="0 0 24 24">
                        <path d="M20,2H4A2,2 0 0,0 2,4V22L6,18H20A2,2 0 0,0 22,16V4C22,2.89 21.1,2 20,2Z"/>
                    </svg>
                </button>
                <button class="footer-btn" id="donateBtn" title="Support Development">
                    <svg viewBox="0 0 24 24">
                        <path d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z"/>
                    </svg>
                </button>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner">
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
            <div class="spinner-ring"></div>
        </div>
        <div class="loading-text">Loading AstralTube...</div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer"></div>

    <script type="module" src="popup.js"></script>
</body>
</html>