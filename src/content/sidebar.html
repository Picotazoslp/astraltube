<!DOCTYPE html>
<div class="astraltube-sidebar-header">
    <div class="astraltube-sidebar-logo">
        <img src="${chrome.runtime.getURL('icons/icon32.png')}" alt="AstralTube">
        <span>AstralTube</span>
    </div>
    <div class="astraltube-sidebar-controls">
        <button id="astraltube-sidebar-minimize" title="Minimize" aria-label="Minimize sidebar">
            <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                <rect x="2" y="5" width="8" height="2"/>
            </svg>
        </button>
        <button id="astraltube-sidebar-close" title="Close" aria-label="Close sidebar">
            <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                <path d="M1 1l10 10M1 11L11 1" stroke="currentColor" stroke-width="2"/>
            </svg>
        </button>
    </div>
</div>

<div class="astraltube-sidebar-tabs">
    <button class="tab-button active" data-tab="playlists" aria-label="Playlists">
        <span class="tab-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2 3h12v2H2V3zm0 4h12v2H2V7zm0 4h12v2H2v-2z"/>
            </svg>
        </span>
        <span class="tab-label">Playlists</span>
    </button>
    <button class="tab-button" data-tab="collections" aria-label="Collections">
        <span class="tab-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M2 2h12a1 1 0 011 1v10a1 1 0 01-1 1H2a1 1 0 01-1-1V3a1 1 0 011-1zm1 2v8h10V4H3z"/>
            </svg>
        </span>
        <span class="tab-label">Collections</span>
    </button>
    <button class="tab-button" data-tab="subscriptions" aria-label="Subscriptions">
        <span class="tab-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M8 2a3 3 0 100 6 3 3 0 000-6zM4 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H4z"/>
            </svg>
        </span>
        <span class="tab-label">Subscriptions</span>
    </button>
    <button class="tab-button" data-tab="activity" aria-label="Recent Activity">
        <span class="tab-icon">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path d="M1 14h14V2H1v12zM2 3h12v10H2V3zm2 8h8v1H4v-1zm0-2h8v1H4V9zm0-2h8v1H4V7z"/>
            </svg>
        </span>
        <span class="tab-label">Activity</span>
    </button>
</div>

<div class="astraltube-sidebar-search">
    <div class="search-container">
        <input type="text" id="sidebar-search" placeholder="Search..." aria-label="Search">
        <button class="search-btn" title="Search" aria-label="Execute search">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                <path d="M10 6a4 4 0 11-8 0 4 4 0 018 0zM13 13l-3-3"/>
            </svg>
        </button>
    </div>
</div>

<div class="astraltube-sidebar-content">
    <!-- Playlists Tab -->
    <div class="tab-content active" data-tab="playlists" role="tabpanel" aria-labelledby="tab-playlists">
        <div class="content-header">
            <h3>My Playlists</h3>
            <div class="header-actions">
                <button id="refresh-playlists-btn" class="icon-btn" title="Refresh" aria-label="Refresh playlists">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                        <path d="M13 7a6 6 0 01-6 6v-2a4 4 0 004-4h2zM1 7a6 6 0 016-6v2a4 4 0 00-4 4H1z"/>
                    </svg>
                </button>
                <button id="create-playlist-btn" class="action-btn">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                        <path d="M6 1v4h4v2H6v4H4V7H0V5h4V1h2z"/>
                    </svg>
                    Create
                </button>
            </div>
        </div>
        <div id="playlists-list" class="content-list" role="list" aria-label="Playlists">
            <div class="loading-spinner" role="status" aria-live="polite">
                <div class="spinner"></div>
                <span>Loading playlists...</span>
            </div>
        </div>
    </div>

    <!-- Collections Tab -->
    <div class="tab-content" data-tab="collections" role="tabpanel" aria-labelledby="tab-collections">
        <div class="content-header">
            <h3>Collections</h3>
            <div class="header-actions">
                <button id="refresh-collections-btn" class="icon-btn" title="Refresh" aria-label="Refresh collections">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                        <path d="M13 7a6 6 0 01-6 6v-2a4 4 0 004-4h2zM1 7a6 6 0 016-6v2a4 4 0 00-4 4H1z"/>
                    </svg>
                </button>
                <button id="create-collection-btn" class="action-btn">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                        <path d="M6 1v4h4v2H6v4H4V7H0V5h4V1h2z"/>
                    </svg>
                    Create
                </button>
            </div>
        </div>
        <div id="collections-list" class="content-list" role="list" aria-label="Collections">
            <div class="loading-spinner" role="status" aria-live="polite">
                <div class="spinner"></div>
                <span>Loading collections...</span>
            </div>
        </div>
    </div>

    <!-- Subscriptions Tab -->
    <div class="tab-content" data-tab="subscriptions" role="tabpanel" aria-labelledby="tab-subscriptions">
        <div class="content-header">
            <h3>Subscriptions</h3>
            <div class="header-actions">
                <button id="refresh-subscriptions-btn" class="icon-btn" title="Refresh" aria-label="Refresh subscriptions">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                        <path d="M13 7a6 6 0 01-6 6v-2a4 4 0 004-4h2zM1 7a6 6 0 016-6v2a4 4 0 00-4 4H1z"/>
                    </svg>
                </button>
                <button id="manage-subscriptions-btn" class="action-btn">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                        <path d="M6 1L1 4v5a2 2 0 002 2h6a2 2 0 002-2V4L6 1z"/>
                    </svg>
                    Manage
                </button>
            </div>
        </div>
        <div class="subscription-filters">
            <select id="subscription-sort" aria-label="Sort subscriptions">
                <option value="title">Sort by Name</option>
                <option value="recent">Recent Videos</option>
                <option value="subscriber_count">Subscriber Count</option>
            </select>
            <button id="grid-view-btn" class="view-toggle active" title="Grid View" aria-label="Grid view">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                    <rect x="1" y="1" width="4" height="4"/>
                    <rect x="7" y="1" width="4" height="4"/>
                    <rect x="1" y="7" width="4" height="4"/>
                    <rect x="7" y="7" width="4" height="4"/>
                </svg>
            </button>
            <button id="list-view-btn" class="view-toggle" title="List View" aria-label="List view">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                    <rect x="1" y="2" width="10" height="2"/>
                    <rect x="1" y="5" width="10" height="2"/>
                    <rect x="1" y="8" width="10" height="2"/>
                </svg>
            </button>
        </div>
        <div id="subscriptions-list" class="content-list" role="list" aria-label="Subscriptions">
            <div class="loading-spinner" role="status" aria-live="polite">
                <div class="spinner"></div>
                <span>Loading subscriptions...</span>
            </div>
        </div>
    </div>

    <!-- Activity Tab -->
    <div class="tab-content" data-tab="activity" role="tabpanel" aria-labelledby="tab-activity">
        <div class="content-header">
            <h3>Recent Activity</h3>
            <div class="header-actions">
                <button id="activity-filter-btn" class="icon-btn" title="Filter" aria-label="Filter activity">
                    <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                        <path d="M1 3h12l-5 6v4l-2-1V9L1 3z"/>
                    </svg>
                </button>
                <button id="clear-activity-btn" class="action-btn">
                    <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
                        <path d="M4 6l8-8h-2L6 2 2 6l4 4L2 6z"/>
                    </svg>
                    Clear
                </button>
            </div>
        </div>
        <div class="activity-filters" style="display: none;">
            <div class="filter-group">
                <label for="activity-type-filter">Type:</label>
                <select id="activity-type-filter">
                    <option value="">All Types</option>
                    <option value="playlist">Playlist</option>
                    <option value="collection">Collection</option>
                    <option value="subscription">Subscription</option>
                    <option value="sync">Sync</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="activity-date-filter">Date:</label>
                <select id="activity-date-filter">
                    <option value="">All Time</option>
                    <option value="today">Today</option>
                    <option value="week">This Week</option>
                    <option value="month">This Month</option>
                </select>
            </div>
        </div>
        <div id="activity-list" class="content-list" role="list" aria-label="Recent activity">
            <div class="loading-spinner" role="status" aria-live="polite">
                <div class="spinner"></div>
                <span>Loading activity...</span>
            </div>
        </div>
    </div>
</div>

<div class="astraltube-sidebar-footer">
    <div class="footer-left">
        <button id="sync-btn" class="footer-btn" title="Sync Data" aria-label="Sync data with YouTube">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                <path d="M13 7a6 6 0 01-6 6v-2a4 4 0 004-4h2zM1 7a6 6 0 016-6v2a4 4 0 00-4 4H1z"/>
            </svg>
            Sync
        </button>
        <button id="settings-btn" class="footer-btn" title="Settings" aria-label="Open settings">
            <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
                <path d="M7 4.5a2.5 2.5 0 100 5 2.5 2.5 0 000-5zM5.5 7a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z"/>
                <path d="M14 7a7 7 0 11-14 0 7 7 0 0114 0zM1 7a6 6 0 1012 0A6 6 0 001 7z"/>
            </svg>
        </button>
    </div>
    <div class="footer-right">
        <div class="sync-status" id="sync-status" aria-live="polite">Last sync: Never</div>
        <div class="connection-indicator" id="connection-status" title="Connection Status">
            <div class="status-dot"></div>
        </div>
    </div>
</div>

<!-- Quick Actions Panel -->
<div class="quick-actions-panel" id="quick-actions" style="display: none;">
    <div class="quick-action" data-action="add-current-video">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 1v6h6v2H8v6H6V9H0V7h6V1h2z"/>
        </svg>
        <span>Add Current Video</span>
    </div>
    <div class="quick-action" data-action="create-playlist">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M2 3h12v2H2V3zm0 4h12v2H2V7zm0 4h8v2H2v-2z"/>
        </svg>
        <span>New Playlist</span>
    </div>
    <div class="quick-action" data-action="organize-subscriptions">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 2a3 3 0 100 6 3 3 0 000-6zM4 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H4z"/>
        </svg>
        <span>Organize Subs</span>
    </div>
    <div class="quick-action" data-action="export-data">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
            <path d="M8 1v6H6L8 1l2 6H8zm-5 7h10v7H3V8z"/>
        </svg>
        <span>Export Data</span>
    </div>
</div>

<div class="astraltube-sidebar-resize-handle" title="Drag to resize"></div>

<!-- Context Menu -->
<div class="context-menu" id="sidebar-context-menu" style="display: none;">
    <div class="context-menu-item" data-action="refresh">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
            <path d="M13 7a6 6 0 01-6 6v-2a4 4 0 004-4h2zM1 7a6 6 0 016-6v2a4 4 0 00-4 4H1z"/>
        </svg>
        Refresh
    </div>
    <div class="context-menu-item" data-action="edit">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
            <path d="M10 1l3 3-8 8H2v-3l8-8z"/>
        </svg>
        Edit
    </div>
    <div class="context-menu-item" data-action="duplicate">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
            <path d="M4 2h8v8h-2V4H4V2z"/>
            <path d="M2 4h8v8H2V4z"/>
        </svg>
        Duplicate
    </div>
    <div class="context-menu-separator"></div>
    <div class="context-menu-item danger" data-action="delete">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="currentColor">
            <path d="M5 1h4v1h3v1H2V2h3V1z"/>
            <path d="M3 3h8v9a1 1 0 01-1 1H4a1 1 0 01-1-1V3z"/>
        </svg>
        Delete
    </div>
</div>